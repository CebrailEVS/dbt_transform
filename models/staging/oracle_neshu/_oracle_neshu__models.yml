# models/staging/_oracle_neshu__models.yml
version: 2

models:
  - name: stg_oracle_neshu__company
    description: "Clients transformés et nettoyés depuis la base Oracle"
    columns:
      - name: idcompany
        description: "Identifiant unique de l'entreprise"
        tests:
          - unique
          - not_null
      - name: company_idcompany
        description: "Link to IDCOMPANY"
      - name: idcompany_type
        description: "Link to COMPANY_TYPE"
      - name: created_at
        description: "Date creation de la ligne"
      - name: updated_at
        description: "Date de modification de la ligne"
      - name: extracted_at
        description: "Date d'extraction depuis la source"
      - name: deleted_at
        description: "Date de suppression (soft delete)"

  - name: stg_oracle_neshu__task_has_product
    description: "Task_has_product transformés et nettoyés depuis la base Oracle"
    columns:
      - name: idtask_has_product
        description: "Identifiant unique de la tâche associée au produit"
        tests:
          - unique
          - not_null
      - name: idcompany_peer
        description: "Référence vers l'entreprise propriétaire"
        tests:  
          - relationships:
              to: ref('stg_oracle_neshu__company')
              field: idcompany
